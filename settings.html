<!DOCTYPE html>
<html lang="en">
  <head>
    <title>WDBG</title>
    <script src="scripts/title_favicon.js"></script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      .navbar {
        background-color: #111;
        padding: 10px 0;
      }

      .navbar a {
        color: #ddd;
        text-decoration: none;
        padding: 10px 15px;
        display: inline-block;
        font-size: 16px;
      }

      .navbar a:hover {
        background-color: #333;
        border-radius: 5px;
      }

      h1 {
        margin: 20px 0;
        font-size: 28px;
      }

      body {
        font-family: Arial, sans-serif;
        background-color: #1e1e1e;
        margin: 0;
        padding: 0;
        text-align: center;
        color: #fff;
        transition: background 0.3s, color 0.3s;
      }

      .settings-container {
        max-width: 760px;
        margin: 0px auto;
        padding: 20px;
        background-color: #2a2a2a;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
        text-align: left;
      }

      .setting-group {
        margin-bottom: 20px;
      }

      label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
      }

      input[type="text"] {
        width: 98%;
        padding: 8px;
        background-color: #1e1e1e;
        color: #fff;
        border: 1px solid #444;
        border-radius: 4px;
      }

      button {
        background-color: #686df2;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        margin-top: 0px;
      }

      button:hover {
        background-color: #5a61e0;
      }

      .preset-buttons {
        margin-top: 0px;
      }

      .preset-buttons h2 {
        font-size: 18px;
        margin-bottom: 10px;
      }

      .preset-buttons button {
        margin: 0px;
        padding: 8px 14px;
        font-size: 14px;
        background-color: #333;
      }

      .preset-buttons button:hover {
        background-color: #444;
      }
    </style>
  </head>
  <body>
    <div class="navbar">
      <a href="index.html">Home</a>
      <a href="downloads.html">Downloads</a>
      <a href="settings.html">Settings</a>
      <a href="changelog.html">Changelog</a>
    </div>
    <h1>Settings</h1>
    <div class="settings-container">
      <div class="setting-group">
        <label for="titleInput">Page Title</label>
        <input type="text" id="titleInput" placeholder="WDBG">
      </div>
      <div class="setting-group">
        <label for="faviconInput">Favicon URL</label>
        <input type="text" id="faviconInput" placeholder="https://wowdabug.github.io/wdbg/images/favicon.png">
      </div>
      <div class="setting-group">
        <label for="panicKeyInput">Panic Keybind</label>
        <input type="text" id="panicKeyInput" placeholder="" readonly>
      </div>
      <div class="setting-group">
        <label>Panic Keybind URL</label>
        <input type="text" id="panicUrlInput" placeholder="">
      </div>
      <div class="setting-group">
        <label>Title and Favicon Presets</label>
        <div class="preset-buttons">
          <button onclick="applyPreset('', '')">Default</button>
          <button onclick="applyPreset('Google', 'https://www.google.com/favicon.ico')">Google</button>
          <button onclick="applyPreset('Search', 'https://www.bing.com/sa/simg/favicon-trans-bg-blue-mg.ico')">Bing</button>
          <button onclick="applyPreset('Classlink', 'https://myapps.classlink.com/favicon.ico')">Classlink</button>
          <button onclick="applyPreset('Schoology', 'https://www.powerschool.com/favicon.ico')">Schoology</button>
        </div>
      </div>
      <div class="setting-group">
        <label>Panic Keybind Presets</label>
        <div class="preset-buttons">
          <button onclick="applyPanicPreset('', '')">Default</button>
          <button onclick="applyPanicPreset('', 'https://www.google.com')">Google</button>
          <button onclick="applyPanicPreset('', 'https://www.bing.com')">Bing</button>
          <button onclick="applyPanicPreset('', 'https://myapps.classlink.com/home')">Classlink</button>
          <button onclick="applyPanicPreset('', 'https://mnps.schoology.com/home')">Schoology</button>
        </div>
      </div>
      <button onclick="saveSettings()">Save Settings</button>
    </div>
<script>
  function saveSettings() {
    const title = document.getElementById('titleInput').value;
    const favicon = document.getElementById('faviconInput').value;
    const panicKey = document.getElementById('panicKeyInput').value;
    const panicUrl = document.getElementById('panicUrlInput').value;
    localStorage.setItem('customTitle', title);
    localStorage.setItem('customFavicon', favicon);
    localStorage.setItem('panicKey', panicKey);
    localStorage.setItem('panicUrl', panicUrl);
  }

  function applyPreset(title, favicon) {
    document.getElementById('titleInput').value = title;
    document.getElementById('faviconInput').value = favicon;
  }

  function applyPanicPreset(key, url) {
    document.getElementById('panicKeyInput').value = key;
    document.getElementById('panicUrlInput').value = url;
  }

  document.addEventListener('DOMContentLoaded', () => {
    const titleInput = document.getElementById('titleInput');
    const faviconInput = document.getElementById('faviconInput');
    const panicKeyInput = document.getElementById('panicKeyInput');
    const panicUrlInput = document.getElementById('panicUrlInput');

    const savedTitle = localStorage.getItem('customTitle');
    const savedFavicon = localStorage.getItem('customFavicon');
    const savedPanicKey = localStorage.getItem('panicKey');
    const savedPanicUrl = localStorage.getItem('panicUrl');

    if (savedTitle) titleInput.value = savedTitle;
    if (savedFavicon) faviconInput.value = savedFavicon;
    if (savedPanicKey) panicKeyInput.value = savedPanicKey;
    if (savedPanicUrl) panicUrlInput.value = savedPanicUrl;

    panicKeyInput.addEventListener('focus', () => {
      const captureKey = (e) => {
        e.preventDefault();
        panicKeyInput.value = e.key;
        document.removeEventListener('keydown', captureKey);
      };
      setTimeout(() => {
        document.addEventListener('keydown', captureKey);
      }, 50);
    });
  });

  document.addEventListener('keydown', (e) => {
    const activeTag = document.activeElement.tagName.toLowerCase();
    if (activeTag === 'input' || activeTag === 'textarea') return;

    const panicKey = localStorage.getItem('panicKey');
    const panicUrl = localStorage.getItem('panicUrl');

    if (panicKey && panicUrl && e.key.toLowerCase() === panicKey.toLowerCase()) {
      window.location.href = panicUrl;
    }
  });
</script>
  </body>
</html>